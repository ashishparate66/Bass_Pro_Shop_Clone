var analyticsLayersJS={populateCommon:function(){if(void 0!==analyticsDataLayer.common){if("undefined"!==analyticsDataLayer.common.tm_Err_Array&&(analyticsDataLayer.common.tm_Err_Array=[]),!0===navigator.cookieEnabled&&void 0!==window.getCookie("JSESSIONID")?analyticsDataLayer.common.tm_Sess_Id=getCookie("JSESSIONID"):analyticsDataLayer.common.tm_Sess_Id="",window.location.href?analyticsDataLayer.common.tm_Pg_Url=window.location.href:analyticsDataLayer.common.tm_Pg_Url="",void 0!==document.referrer?(document.referrer.indexOf(document.location.hostname)<0?!0===navigator.cookieEnabled&&(setCookie("ExternalSiteRfrl",document.referrer,{path:"/"}),analyticsDataLayer.common.tm_Ext_Rfrl_Loc=document.referrer):void 0!==getCookie("ExternalSiteRfrl")?analyticsDataLayer.common.tm_Ext_Rfrl_Loc=getCookie("ExternalSiteRfrl"):analyticsDataLayer.common.tm_Ext_Rfrl_Loc="",analyticsDataLayer.common.tm_Rfrl_Url=document.referrer):(analyticsDataLayer.common.tm_Rfrl_Url="NA",analyticsDataLayer.common.tm_Ext_Rfrl_Loc="NA"),!0===navigator.cookieEnabled&&(void 0!==window.getCookie("firstPageInSession")?(analyticsDataLayer.common.tm_Rfrl_Loc=getCookie("firstPageInSession"),analyticsDataLayer.common.tm_Sess_Strt_Ind="0"):void 0===window.getCookie("firstPageInSession")?(setCookie("firstPageInSession",window.location.href,{path:"/"}),analyticsDataLayer.common.tm_Rfrl_Loc=window.location.href,analyticsDataLayer.common.tm_Sess_Strt_Ind="1"):analyticsDataLayer.common.tm_Rfrl_Loc=""),document.title?analyticsDataLayer.common.tm_Web_Pg_Title_Nm=document.title:analyticsDataLayer.common.tm_Web_Pg_Title_Nm="",analyticsDataLayer.pageType&&(analyticsDataLayer.pageType.toLowerCase().indexOf("product")>-1?analyticsDataLayer.common.tm_Pg_ID=analyticsDataLayer.pageType.replace(" ","_")+"_"+analyticsDataLayer.partNumber:(analyticsDataLayer.common.tm_Pg_ID=analyticsDataLayer.pageName.replace(/:/g,"_"),analyticsDataLayer.common.tm_Pg_ID=analyticsDataLayer.common.tm_Pg_ID.replace(/ /g,""))),window.innerWidth&&window.innerHeight){let t=window.innerWidth,r=window.innerHeight;if(analyticsDataLayer.common.tm_Viewport_Width=window.innerWidth.toString(),t<r)var a=!0;else a=!1;a?analyticsDataLayer.common.tm_Dvc_Typ_Cd=t<768?"mobile":t<900?"tablet":"desktop":t<900?analyticsDataLayer.common.tm_Dvc_Typ_Cd="mobile":t<1024||!0===isIOS()||!0===isAndroid()?analyticsDataLayer.common.tm_Dvc_Typ_Cd="tablet":analyticsDataLayer.common.tm_Dvc_Typ_Cd="desktop"}else analyticsDataLayer.common.tm_Dvc_Typ_Cd="";if("undefined"==typeof BPSBreadcrumbTrailWidgetJS&&document.getElementById("widget_breadcrumb")&&(analyticsDataLayer.common.tm_Breadcrumb=encodeURIComponent(document.getElementById("widget_breadcrumb").innerText)),analyticsDataLayer.common.tm_Site_Id="1",getCookie("IpGeo")){var t=getCookie("IpGeo").split("_");for(let a=0;a<t.length;a++)"City"==t[a].split("-")[0]||"city"==t[a].split("-")[0]?analyticsDataLayer.common.akamai_Geo_City=t[a].split("-")[1]:"Country"!=t[a].split("-")[0]&&"country"!=t[a].split("-")[0]||(analyticsDataLayer.common.akamai_Geo_Country=t[a].split("-")[1])}else analyticsDataLayer.common.akamai_Geo_City="",analyticsDataLayer.common.akamai_Geo_Country="";getCookie("IpState")?analyticsDataLayer.common.akamai_Geo_Region_Code=getCookie("IpState"):analyticsDataLayer.common.akamai_Geo_Region_Code="",getCookie("IpZipCode")?analyticsDataLayer.common.akamai_Geo_Zip=getCookie("IpZipCode"):analyticsDataLayer.common.akamai_Geo_Zip="";var r=void 0!==navigator.doNotTrack?navigator.doNotTrack:void 0!==window.doNotTrack?window.doNotTrack:void 0!==navigator.msDoNotTrack?navigator.msDoNotTrack:null;0===parseInt(r)||"no"==r?analyticsDataLayer.common.tm_DoNotTrack="0":1===parseInt(r)||"yes"==r?analyticsDataLayer.common.tm_DoNotTrack="1":analyticsDataLayer.common.tm_DoNotTrack="0"}void 0===analyticsDataLayer.pageName&&null!==document.querySelector('meta[name="pageIdentifier"]')&&(analyticsDataLayer.pageName=document.querySelector('meta[name="pageIdentifier"]').content)},populateOrder:function(){if(analyticsDataLayer.order.tm_Add_Ship_Fee_Amt=byId("shippingSurcharge")?byId("shippingSurcharge").value:"",analyticsDataLayer.order.tm_Business_Channel=byId("businessChannel")?byId("businessChannel").value:"",0!=document.querySelectorAll('[id^="billAddr"]').length?(analyticsDataLayer.order.tm_Bill_To_Cntry=byId("billAddrCountry")?byId("billAddrCountry").value:"",analyticsDataLayer.order.tm_Bill_To_Iso_Cntry=byId("billAddrCountryISO")?byId("billAddrCountryISO").value:"",analyticsDataLayer.order.tm_Bill_To_Terr_Cd=byId("billAddrTerr")?byId("billAddrTerr").value:"",analyticsDataLayer.order.tm_Bill_To_Zip_Cd=byId("billAddrZip")?byId("billAddrZip").value:"",analyticsDataLayer.order.tm_Bill_To_City=byId("billAddrCity")?byId("billAddrCity").value:"",analyticsDataLayer.order.tm_Eml_Addr=byId("billAddrEmail")?byId("billAddrEmail").value:""):(analyticsDataLayer.order.tm_Bill_To_Cntry=byId("initialBillAddrCountry")?byId("initialBillAddrCountry").value:"",analyticsDataLayer.order.tm_Bill_To_Iso_Cntry=byId("initialBillAddrCountryISO")?byId("initialBillAddrCountryISO").value:"",analyticsDataLayer.order.tm_Bill_To_Terr_Cd=byId("initialBillAddrTerr")?byId("initialBillAddrTerr").value:"",analyticsDataLayer.order.tm_Bill_To_Zip_Cd=byId("initialBillAddrZip")?byId("initialBillAddrZip").value:"",analyticsDataLayer.order.tm_Bill_To_City=byId("initialBillAddrCity")?byId("initialBillAddrCity").value:"",analyticsDataLayer.order.tm_Eml_Addr=byId("initialBillAddrEmail")?byId("initialBillAddrEmail").value:""),analyticsDataLayer.order.tm_Dscnt_Tot_Amt=byId("totalPromotionsDiscount")?byId("totalPromotionsDiscount").value:"",analyticsDataLayer.order.tm_Gft_Ind=byId("thisOrderIsAGift")?byId("thisOrderIsAGift").checked.toString():"",analyticsDataLayer.order.tm_Ship_Fee_Amt=byId("totalShippingAnalytics")?byId("totalShippingAnalytics").value:"",analyticsDataLayer.order.tm_Ship_To_Cntry=byId("shipAddrCountry")?byId("shipAddrCountry").value:"",analyticsDataLayer.order.tm_Ship_To_City=byId("shipAddrCity")?byId("shipAddrCity").value:"",analyticsDataLayer.order.tm_Ship_To_Zip=byId("shipAddrZip")?byId("shipAddrZip").value:"",analyticsDataLayer.order.tm_Tax_Estimator_Zip_Cd=byId("shipAddrZip")?byId("shipAddrZip").value:"",analyticsDataLayer.order.tm_Ship_To_Terr_Cd=byId("shipAddrTerr")?byId("shipAddrTerr").value:"",analyticsDataLayer.order.tm_Sls_Tran_Entr_Dt=byId("orderConfDate")?byId("orderConfDate").value:"",analyticsDataLayer.order.tm_Sls_Tran_Tot_Amt=byId("grandTotalAnalytics")?byId("grandTotalAnalytics").value:"",analyticsDataLayer.order.tm_Tax_Amt=byId("totalTaxAnalytics")?byId("totalTaxAnalytics").value:"",analyticsDataLayer.order.paymentTypeArray=analyticsDataLayer.order.paymentTypeArray?analyticsDataLayer.order.paymentTypeArray:"",analyticsDataLayer.order.tm_Ship_Svc_Lvl_Cd=analyticsDataLayer.order.tm_Ship_Svc_Lvl_Cd?analyticsDataLayer.order.tm_Ship_Svc_Lvl_Cd:"",byId("shipToStoreDD")){var a=byId("shipToStoreDD"),t=byId("store_"+a[a.selectedIndex].value.toString())?byId("store_"+a[a.selectedIndex].value.toString()).value:"";analyticsDataLayer.order.tm_Ship_To_Store_Loc_Name=void 0!==t&&""!==t?t:""}else byId("shipToStoreCode")?analyticsDataLayer.order.tm_Ship_To_Store_Loc_Name=byId("shipToStoreCode").value:analyticsDataLayer.order.tm_Ship_To_Store_Loc_Name="";if(analyticsDataLayer.order.tm_Prom_Cd=[],document.getElementsByClassName("promotionCodesAnalytics"))for(var r=document.getElementsByClassName("promotionCodesAnalytics"),e=0;e<r.length;e++)analyticsDataLayer.order.tm_Prom_Cd.push(r[e].value);if(analyticsDataLayer.order.tm_Imp_Prom_Cd=[],document.getElementsByClassName("impPromCodesAnalytics")){var o=document.getElementsByClassName("impPromCodesAnalytics");for(e=0;e<o.length;e++)analyticsDataLayer.order.tm_Imp_Prom_Cd.push(o[e].value)}if(byId("isShipToStore")?analyticsDataLayer.order.tm_Ship_To_Ind="Ship To Store":analyticsDataLayer.order.tm_Ship_To_Ind="Customer Address",byId("cat_Subcat_JSON")){var i=JSON.parse(byId("cat_Subcat_JSON").value);for(e=0;e<analyticsDataLayer.order.tm_Cart_Array.length;e++)for(var n=0;n<i.length;n++)i[n].partNumber==analyticsDataLayer.order.tm_Cart_Array[e].tm_Sku_Id&&(analyticsDataLayer.order.tm_Cart_Array[e].category=i[n].Category?i[n].Category:"",analyticsDataLayer.order.tm_Cart_Array[e].subcategory=i[n].Subcategory?i[n].Subcategory:"")}if(byId("jda_Tree_JSON")){var y=JSON.parse(byId("jda_Tree_JSON").value);for(e=0;e<analyticsDataLayer.order.tm_Cart_Array.length;e++)for(n=0;n<y.length;n++)y[n].partNumber==analyticsDataLayer.order.tm_Cart_Array[e].tm_Sku_Id&&(analyticsDataLayer.order.tm_Cart_Array[e].tm_JDA_Tree=y[n].jdaTree?y[n].jdaTree:"")}analyticsDataLayer.order.tm_Restrictions_Err_Array=analyticsDataLayer.order.tm_Restrictions_Err_Array||[];var d=getCookie("BPS_Physical_Store")?getCookie("BPS_Physical_Store"):"",l=getCookie("BPS_gun_store_id")?getCookie("BPS_gun_store_id"):"";analyticsDataLayer.order.tm_Cart_Array&&analyticsDataLayer.order.tm_Cart_Array.forEach(function(a){a.tm_Store=d,a.tm_GunStore="1"==a.tm_Is_Firearm?l:"NA"})},addLastAction:function(a,t,r){if("undefined"!=typeof lastActionDataLayer){if(Object.keys(lastActionDataLayer).length>0)for(var e in lastActionDataLayer)delete lastActionDataLayer[e];if(lastActionDataLayer.tm_Last_Action_Cd=void 0!==a?a:"",void 0!==t&&1==t){var o=new Date;lastActionDataLayer.tm_Ofst=o.toString()}if(void 0!==r)for(var i in r)lastActionDataLayer[i]=r[i]}},addRestrictionError:function(a,t,r){if(void 0!==analyticsDataLayer.order.tm_Restrictions_Err_Array){var e=analyticsDataLayer.order.tm_Restrictions_Err_Array,o={};a=a||"",t=t||"","Order"!=a&&"order"!=a||(o.tm_Restriction_Error_Level="Order",o.tm_Restriction_Error_Code=t),"Line"!=a&&"line"!=a||(o.tm_Restriction_Error_Level="Line",o.tm_Restriction_Error_Code=t,r&&(o.tm_Restriction_Error_SKU=r)),e.push(o)}},addISPAnalytics:function(){var a=document.getElementsByClassName("ispCartAnalytics"),t=analyticsDataLayer.order.tm_Cart_Array;if(a.length>0)for(var r=0;r<a.length;r++)for(var e=a[r].id.split("_")[1],o=a[r].value.split("|"),i=0;i<t.length;i++)t[i].tm_Sku_Id!=e&&t[i].partNumber!=e||o.forEach(function(a){let r=a.split(":")[0],e=a.split(":")[1];t[i][r]=e})},addToCustomer:function(a){if(analyticsDataLayer.customer){var t=analyticsDataLayer.customer;for(var r in a)if(!t.hasOwnProperty(r)&&a.hasOwnProperty(r)){var e=a[r];t[r]=e}}},addToLayer:function(a,t){if("object"==typeof a)for(var r in t)if(!a.hasOwnProperty(r)&&t.hasOwnProperty(r)){var e=t[r];a[r]=e}},addSelectedStoreId:function(){"undefined"!=typeof BPSStoreLocatorJS&&void 0!==BPSStoreLocatorJS.selectedStoreId?analyticsDataLayer.storeId=BPSStoreLocatorJS.selectedStoreId:analyticsDataLayer.storeId=""},addPromoDescs:function(a,t){void 0!==analyticsDataLayer.order?(analyticsDataLayer.order.tm_Promo_Desc_Array=analyticsDataLayer.order.tm_Promo_Desc_Array||[],analyticsDataLayer.order.tm_Promo_Desc_Array.push({tm_Promo_Code:t,tm_Promo_Short_Desc:a})):console.debug("analyticsDataLayer.order is not defined.")}};dojo.addOnLoad(function(){analyticsLayersJS.addSelectedStoreId()});